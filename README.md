# ssm-rank-scraper

- [ssm-rank-scraper](#ssm-rank-scraper)
  - [Description](#description)
  - [Features](#features)
  - [Usage](#usage)
  - [Advanced](#advanced)

## Description

A simple and **quick** python script to scrape SSM ranking in MS Excel format that can also compute minimum points required for every combination of residency, place and type of contract.

_An universitaly account is required. You also need to be signed-up for the SSM test of the year you wish to download the ranking._

Un semplice e **rapido** script in python per scaricare la graduatoria SSM in formato MS Excel che può anche calcolare i punteggi minimi per accedere a ogni combinazione di specializzazione, sede e tipo di contratto.

_Per poter visualizzare la graduatoria è necessario possedere un account universitaly ed essere iscritti al concorso SSM dell'anno di cui si desidera scaricare la graduatoria._

## Features

- **Pretty fast** (~6 seconds on MacBook Pro M1-pro);
- **Multiprocess-enabled** (default is number of processes = number of cores);
- Length of ranking is dinamically determinated;
- Don't need selenium webdriver;
- Relatively light dependancies;
- Can compute minimum points per combination of residency, place and type of contract;
- Can be imported and called on-demand;

## Usage

1. Create and activate virtual env with python ≤ 3.10

   <code>python -m venv env</code>

   on Windows <code>env\Scripts\activate</code>

   on Unix systems <code>. env/Scripts/activate</code>

2. Install dependancies with

   <code>pip install -r requirements.txt</code>

3. Edit `credentials_model.json` and rename it to `credentials.json`:

   1. Edit email with your universitaly account email

   2. Edit password with your universitaly account password

4. Customize (if required)

   1. Edit `ssm_rank_scraper.py`, particularly `YEAR` and `COMPUTE_MIN_PTS`.

5. Run

   <code>python ssm_rank_scraper.py</code>

## Advanced

While you can just call `ssm_rank_scraper.py` some of you may need to use it differently. In fact, `ssm_rank_scraper.py` contains several helper functions that help reading credentials, calling `grabber.grab`, which returns a _pd.DataFrame_ instance with the downloaded ranking, computing minimum points per school, location and type of contract combination and saving the results. `ssm_rank_scraper` also makes sure to ouput the log in order to keep trace of what is being done and give the user a feedback.

If you need to somehow automate the process of downloading the ranking, import `grabber` or `grabber.grab`. Doing so, you will avoid the output that is generated by `ssm_rank_scraper`.

`grabber.grab` supports also passing functions as callbacks that are executed in particular situations, such as when a page with no entries is encountered.
